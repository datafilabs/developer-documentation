---
sidebar_position: 2
---

# Self Host Edge server (local)

Datafi Edge servers are containerized, It can be run anywhere a docker container can run. If you don't have a docker environment, you can start by installing docker in your server.

Complete the following steps to setup a local Edge Server.

> Our goal here is to run an edge server in your local machine and connect to a MySQL DB. You can use the same steps to connect any other datasource by changing the dfcli parameters

1. Install Docker Desktop and complete the setup steps (ref: <a href="https://www.docker.com/products/docker-desktop" target="_blank">https://www.docker.com/products/docker-desktop</a> )
2. Verify Docker has been setup by running the following and confirm **Hello from Docker!** reply:
   ```
   docker run hello-world
   ```
3. Open the terminal and pull&run the latest datafi CLI container image with the following command:

   ```bash
   docker pull datafi/cli:latest
   docker run --rm -ti -v ~/Downloads:/es/out datafi/cli:latest
   ```

   > the CLI container will generate it's outputs in the /es/out folder, the above command attach a local directory (`~/Downloads`), so that you can access those files later. Instead of `~/Downloads` you can use any local directory.

4. The previous step will run cli container which will have `dfcli` installed. use `dfcli` to generate environment variables which should be used while running the edge-server. run this command in the bash shell opened as part of previous step

   ```bash
   dfcli dataset --endpoint <IP address or host name where the edge-server will be running> --type mysql --name "MyNewDataset" --pointOfContact <your email address>  --address <host name of the mysql db> --dbname <database name>  --username <database user> --password <database password> add

   ```

   > The above command adds a MySQL db, If you want to add a different datasource the parameter used might be slighly different. you can run `dfcli dataset` to see the parameters for the available data sources.

   This will try to connect to the db with the provided credentials and inspect the schema of the db. If its successful, It will generate a `key.txt` file in the `es/out` folder which you should note down as we will be using that in the next step while running the container (In this case as we mounted es/host to ~/Downloads, we will be able to see the file in ~/Downloads) . In addition to this you will also get a link to connect the new dataset you added to your Datafi Workspace.

   Once you note down both, you can enter `exit` which will exit the CLI and returns you back to your local terminal.

5. now run the edge server container with the key as an environment variable.

   ```sh
   docker pull datafi/es:latest
   docker run --rm -p 443:443 -e KEY=$(cat ~/Downloads/key.txt)  datafi/es:latest
   ```

   this will run the edge-server, and you should see `Edge server started` in the logs

6. Use the link above (eg: https://home.datafi.us/datasets/add/0ZyN9zdXIoVJBqcgk) to connect the edge-server to your Datafi workspace. Before clicking on the link, make sure you have already [signed up for a Free Datafi Account](https://home.datafi.us/register) and is currently logged in into your workspace.

## Step 2: Configure your Dataset

After Completing the step 1, you should see the Edit Dataset dialog which will allow you to configure and edit the details for the dataset you just added. The four tabs we will look at for configuring a dataset are: Overview, Schema, Users, and Rules.If you are not planning to invite other users to your workspace, then the Overview page is probably the only section you need to complete.

Click **Save** continue and proceed to [**Step 3**](#step-3-viewing-your-data)

(The dialog can be accessed again any time by clicking the **Edit** icon of the dataset you are currently active on, in case you close it before you are finished or want to make a change.)

### Overview

In the dataset Overview you can update the name, description, and tags for your dataset. This information is used to help other users find this dataset and itâ€™s contents.

### Schema

The Schema section allows you to configure how the dataset is viewed by users with the ability to change the following:

- Icons next to fields names allow creating Dataview Links (which are similar to database joins) and External Links which allow you to link to URLs based on the data in the fields.
- Catalog Name is the visible name users will see for fields and tables.
- Accessibility Controls are the following:

  - Access can be turned on/off completely for a field with this slider
  - Confidentiality - This drop down allows you, the data owner, to specify a confidentiality level for each field. Users with higher values directly or indirectly assigned are able to see the value.
  - Sensitivity - This drop down allows you, the data owner, to specify a sensitivity level for each field. Users with higher values directly or indirectly assigned are able to see the field.
  - Identity - - This drop down allows you, the data owner, to specify an identity level for each field. Users with higher values directly or indirectly assigned are able to see the field.

- renaming tables and fields to have more user friendly names where necessary.
- The trashcan icon allows a table (aka datafile) within the dataset to be removed from view within the system; however, it does not change the underlying table and dataset.

The Schema section allows you to configure the following:

- accessability control, determining if any specific tables or fields should be hidden/blocked.
- renaming tables and fields to have more user friendly names where necessary.
- Dataset level access rating for tables and fields can be set to have a more in depth control over who can see what information in your dataset. ([ More details about Access Ratings ](#access-rating-explained))

### Users

The User section allows you to modify access your dataset Users must be previously

Data Owners are the users with the privilege to modify all aspects of the dataset. All users in this category will have full access to the dataset and the ability to modify the access to the dataset.

Data Users is the section where users with limited rights are created and managed. Each user added in this section can have specific values for Confidentiality, Sentitivity, and Identity. When assigned a value users can see any element with a rating less than or equal to the users assigned value.

Teams allow users to be grouped and access levels to be assigned based on the group.

### Rules

The rules sections allows you to create rules that can mask specific fields in your dataset's tables. Rules control how data is seen by users when their specific grants are less than the values necessary to see specific fields. ([ more details on rules ](#rule-policies-explained))

## Step 3: Viewing your data

On the [Dataview](https://dataficloud.com/dataview) page you will be able to see a list of datasource that you have access to on the left side of you screen. Choosing a table from one of them will open the contents of that dataset that your [Access Rating](#access-rating-explained) permits, and mask fields according to any rules applied to that dataset.
